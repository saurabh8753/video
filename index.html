<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Z-Tera Default Player</title>

<!-- üî• Original Vignette Ad -->
<script>
(function(s){
  s.dataset.zone='10659940',
  s.src='https://gizokraijaw.net/vignette.min.js'
})
([document.documentElement, document.body]
  .filter(Boolean)
  .pop()
  .appendChild(document.createElement('script')));
</script>

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">

<style>
:root{--bg:#0f172a;--card:#1e293b}
body{margin:0;padding:20px;background:var(--bg);font-family:system-ui;color:#fff;display:flex;justify-content:center}
.main-card{width:100%;max-width:1000px;background:var(--card);border-radius:16px;overflow:hidden;box-shadow:0 20px 40px rgba(0,0,0,.4)}
.video-section{position:relative;background:#000}
.video-wrapper{position:relative}
.buffering{position:absolute;inset:0;display:none;align-items:center;justify-content:center;background:rgba(0,0,0,.4);z-index:5}
video{width:100%;background:#000}
.content{padding:20px}
.title{font-size:1.2rem;margin-bottom:12px}
.meta{display:grid;grid-template-columns:repeat(auto-fit,minmax(140px,1fr));gap:12px;background:rgba(255,255,255,.05);padding:12px;border-radius:10px;margin-bottom:16px}
.meta div{font-size:.85rem;color:#94a3b8}

/* üîª Rotating Bottom Banner */
.yt-banner-ad{
  position:absolute;bottom:0;left:0;width:100%;
  display:none;
  background:linear-gradient(to top,rgba(0,0,0,.9),rgba(0,0,0,.4),transparent);
  padding:12px;
}
.yt-ad-content{display:flex;justify-content:space-between;align-items:center;max-width:900px;margin:auto}
.yt-ad-text{color:#fff;font-size:14px}
.yt-ad-btn{background:#ff0000;color:#fff;padding:6px 14px;border-radius:4px;text-decoration:none;font-size:13px}
.yt-close{color:#ccc;cursor:pointer}

/* üîª Mid Roll Popup */
.mid-popup{
  position:absolute;inset:0;display:none;
  align-items:center;justify-content:center;
  background:rgba(0,0,0,.85);
  z-index:40;
}
.mid-box{
  background:#111;padding:28px;width:90%;max-width:400px;
  border-radius:12px;text-align:center;
}
.mid-box h3{margin:0 0 10px}
.mid-box p{font-size:14px;color:#ccc;margin-bottom:18px}
.mid-btn{display:inline-block;background:#ff0000;color:#fff;padding:8px 18px;border-radius:6px;text-decoration:none;margin-bottom:15px}
.skip-btn{display:block;margin:auto;padding:6px 14px;background:#222;color:#fff;border:1px solid #444;border-radius:4px;cursor:pointer;font-size:13px}
.skip-btn.disabled{opacity:.5;pointer-events:none}
</style>
</head>

<body>

<div class="main-card" id="app">
<div id="loading"><i class="fas fa-spinner fa-spin"></i> Loading Video...</div>
</div>

<script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>

<script>
async function loadVideo(){
const app=document.getElementById("app");
const videoUrl=new URLSearchParams(location.search).get("url");

if(!videoUrl){
app.innerHTML="<div style='padding:40px;text-align:center'>No URL Found</div>";
return;
}

try{
const res=await fetch(`https://ztera.yaartunah.workers.dev/?url=${encodeURIComponent(videoUrl)}`);
const data=await res.json();
if(data.status!=="success") throw new Error();

const file=data.list[0];
const stream=file.fast_stream_url?.["480p"]||file.stream_url;

app.innerHTML=`
<div class="video-section">
<div class="buffering" id="buffering">
<i class="fas fa-spinner fa-spin"></i>
</div>

<div class="video-wrapper">
<video id="video" controls playsinline poster="${file.thumbnail}"></video>

<!-- Rotating Banner -->
<div class="yt-banner-ad" id="ytBanner">
<div class="yt-ad-content">
<span class="yt-ad-text" id="adText"></span>
<a href="#" target="_blank" id="adBtn" class="yt-ad-btn">Learn More</a>
<span class="yt-close" id="ytClose">‚úï</span>
</div>
</div>

<!-- Mid Roll Popup -->
<div class="mid-popup" id="midPopup">
<div class="mid-box">
<h3>üî• Sponsored Message</h3>
<p>Exclusive Offer ‚Äì Limited Time Only!</p>
<a href="https://your-affiliate-link.com" target="_blank" class="mid-btn">Claim Offer</a>
<button class="skip-btn disabled" id="skipBtn">Skip Ad in 5...</button>
</div>
</div>

</div>
<div class="content">
<div class="title">${file.name}</div>
<div class="meta">
<div>üíæ ${file.size_formatted}</div>
<div>‚è± ${file.duration}</div>
<div>üé• ${file.quality}</div>
<div>üìÅ ${file.folder}</div>
</div>
</div>`;

const video=document.getElementById("video");
const loader=document.getElementById("buffering");

if(video.canPlayType("application/vnd.apple.mpegurl")){
video.src=stream;
}else if(Hls.isSupported()){
const hls=new Hls();
hls.loadSource(stream);
hls.attachMedia(video);
}

video.addEventListener("waiting",()=>loader.style.display="flex");
video.addEventListener("playing",()=>loader.style.display="none");

/* üí∞ Rotating Banner Ads */
const ads=[
{text:"üî• Win ‚Çπ500 Instantly",link:"https://affiliate1.com"},
{text:"üéÅ Premium OTT Access",link:"https://affiliate2.com"},
{text:"üí∞ Earn Watching Videos",link:"https://affiliate3.com"}
];

const ytBanner=document.getElementById("ytBanner");
const adText=document.getElementById("adText");
const adBtn=document.getElementById("adBtn");
const ytClose=document.getElementById("ytClose");

let adIndex=0,rotation;

function showAd(){
const ad=ads[adIndex];
adText.textContent=ad.text;
adBtn.href=ad.link;
ytBanner.style.display="block";
adIndex=(adIndex+1)%ads.length;
}

video.addEventListener("play",()=>{
setTimeout(()=>{
showAd();
rotation=setInterval(showAd,8000);
},5000);
});

ytClose.onclick=()=>{ytBanner.style.display="none";clearInterval(rotation);};

/* üé¨ Mid Roll Skip Ad */
const midPopup=document.getElementById("midPopup");
const skipBtn=document.getElementById("skipBtn");
let midShown=false;

video.addEventListener("timeupdate",()=>{
if(!midShown && video.duration){
const percent=(video.currentTime/video.duration)*100;
if(percent>=50){
midShown=true;
midPopup.style.display="flex";
video.pause();

let timeLeft=5;
skipBtn.textContent=`Skip Ad in ${timeLeft}...`;

const countdown=setInterval(()=>{
timeLeft--;
skipBtn.textContent=`Skip Ad in ${timeLeft}...`;
if(timeLeft<=0){
clearInterval(countdown);
skipBtn.textContent="Skip Ad";
skipBtn.classList.remove("disabled");
}
},1000);
}
}
});

skipBtn.onclick=()=>{
midPopup.style.display="none";
video.play();
};

}catch{
app.innerHTML="<div style='padding:40px;text-align:center'>Video Load Failed</div>";
}
}

loadVideo();
</script>

</body>
</html>
